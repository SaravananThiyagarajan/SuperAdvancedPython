<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>Super Advanced Python</title>

		<meta name="description" content="A framework for easily creating beautiful presentations using HTML">
		<meta name="author" content="Hakim El Hattab">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<link rel="stylesheet" href="css/reveal.css">
        <link rel="stylesheet" href="css/theme/spkrbar.css" id="theme">

		<!-- For syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- If the query includes 'print-pdf', use the PDF print sheet -->
		<script>
			document.write( '<link rel="stylesheet" href="css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
            <div class="slides">
				<section>
					<h1>Super Advanced Python</h1>
					<h3>This Talk Attracts Zombies</h3>
					<p>
						<small>Presented by <a href="http://www.spkrbar.com/raymond">Raymond Chandler III</a> / <a href="http://twitter.com/raymondchandler">@raymondchandler</a></small>
					</p>
                </section>

                <section>
                    <h1>A Shameless Plug</h1>
                </section>

                <section>
                    <img src="logo.png" />
                </section>

                <section>
                    <h1>What is this tutorial about?</h1>
                </section>

                <section>
                    <h2>Introduction</h2>
                    <ol>
                        <li>Everything is an Object</li>
                        <li>Introduction to Set and Category Theory</li>
                    </ol>
                </section>

                <section>
                    <h2>Operating on Sets</h2>
                    <ol>
                        <li>List/Dict Comprehensions</li>
                        <li>Lambda Expressions</li>
                        <li>Filter/Map/Reduce/Enumerate/Zip</li>
                        <li>Any/All/Sum</li>
                    </ol>
                </section>

                <section>
                    <h2>Advanced Functions</h2>
                    <ol>
                        <li>Closures</li>
                        <li>Decorators</li>
                    </ol>
                </section>

                <section>
                    <h2>Iterators vs Generators</h2>
                    <ol>
                        <li>Iterators vs Generators</li>
                        <li>Yield Keyword</li>
                        <li>Returning to the List comprehension</li>
                        <li>Generator Expressions</li>
                    </ol>
                </section>

                <section>
                    <h2>The Itertools Library</h2>
                    <ol>
                        <li>chain(*seq)</li>
                        <li>cominations(seq, choice)</li>
                        <li>permutations(seq, choice)</li>
                        <li>compress(seq, selectors)</li>
                    </ol>
                </section>

                <section>
                    <h2>Itertools (cont.)</h2>
                    <ol>
                        <li>count(start, step)</li>
                        <li>cycle(seq)</li>
                        <li>groupby(seq, key=)</li>
                        <li>ifilter/imap/izip</li>
                        <li>product</li>
                    </ol>
                </section>

                <section>
                    <h2>Introspection and Metaprogramming</h2>
                    <ol>
                        <li>What is Metaprogramming?</li>
                        <li>getattr/hasattr/setattr</li>
                        <li>Understanding type</li>
                        <li>Metaclasses</li>
                    </ol>
                </section>

                <section>
                    <h1>ACT 1</h1>
                </section>

                <section>
                    <h1>Critcal Point #1</h1>
                    <h2>Everything is an object!</h2>
                </section>

                <section>
                    <h1>What is a Set?</h1>
                </section>

                <section>
                    <h1>A collection of objects.</h1>
                </section>

                <section>
                    <h1>Critical Point #2</h1>
                    <h2>Everything in Python can be grouped into a set!</h2>
                </section>

                <section>
                    <h1>What is Set Theory?</h1>
                </section>

                <section>
                    <h2>A branch of mathematics that defines rules and operations for working with Sets</h2>
                </section>

                <section>
                    <h2>Set Concepts</h2>

                    <ul>
                        <li>Union - A ∪ B - Member of A, B, or Both</li>
                        <li>Intersection - A ∩ B - Member of Both</li>
                        <li>Set Difference - A \ B - Member of A, Not Member of B</li>
                        <li>Symmetric Difference - A △  B or A ⊖ B - Member of A or B but NOT Both</li>
                        <li>Catesian Product - A × B - All possible pairs</li>
                    </ul>
                </section>

                <section>
                    <h1>In Python Sets are Tuples or Lists</h1>
                </section>

                <section>
                    <h1>What is Category Theory?</h1>
                </section>

                <section>
                    <h2>The study of "morphisms". The transitions of sets to other sets.</h2>
                </section>

                <section>
                    <h1>Functors, Functors, Functors!</h1>
                </section>

                <section>
                    <h1>Critical Point #3</h1>
                    <h2>A "morphism" occurs when we apply a functor to a set that transforms it into something else.</h2>
                </section>

                <section>
                    <h1>Critical Point #4</h1>
                    <h2>For any set we can apply some number of functors to arrive at ANY other set</h2>
                </section>

                <section>
                    <h1>The Point?</h1>
                </section>

                <section>
                    <h2>Anything in Python can be transformed into anything else by simply applying functors to sets</h2>
                </section>

                <section>
                    <h1>ACT 2</h1>
                </section>

                <section>
                    <h2>List Comprehension</h2>

                    <pre><code data-trim class="python">
my_list = [1, 2, 3, 4, 5, 6]
print([x * 2 for x in my_list])
>>> [2, 4, 6, 8, 10, 12]
					</code></pre>
                </section>

                <section>
                    <h2>Dict Comprehension</h2>

                    <pre><code data-trim class="python">
my_dict = {'a': 1, 'b': 2, 'c': 3, 'd': 4, 'e': 5, 'f': 6}
result = {k: v * 2 for k, v in my_dict}
print(result)
>>> {'a': 2, 'b': 4, 'c': 6, 'd': 8, 'e': 10, 'f': 12}
                    </code></pre>
                </section>

                <section>
                    <h2>Dict Comprehension (cont.)</h2>

                    <pre><code data-trim class="python">
print(result.iterkeys())
>>> ['a', 'b', 'c', 'd', 'e', 'f']

print(result.itervalues())
>>> [2, 4, 6, 8, 10, 12]

print(result.iteritems())
>>> [('a', 2), ('b', 4), ('c', 6), ('d', 8), ('e', 10), ('f': 12)]
                    </code></pre>
                </section>

                <section>
                    <h2>Lambda Expression</h2>
                    <pre><code data-trim class="python">
my_list = [1, 2, 3, 4, 5, 6]
def my_func(item):
    return item * 2

print([my_func(x) for x in my_list])
>>> [2, 4, 6, 8, 10, 12]

other_func = lambda x: x * 2
print([other_func(x) for x in my_list])
>>> [2, 4, 6, 8, 10, 12]
                    </code></pre>
                </section>

                <section>
                    <h2>Enumerate</h2>
                    <pre><code data-trim class="python">
my_first_list = ['a', 'b', 'c', 'd', 'e']
my_second_list = [1, 2, 3, 4, 5]
print(zip(my_first_list, my_second_list))
>>> [('a', 1), ('b', 2), ('c', 3), ('d', 4), ('e', 5)]

print(enumerate(my_first_list))
>>> [(0, 'a'), (1, 'b'), (2, 'c'), (3, 'd'), (4, 'e')]

print(enumerate(my_first_list, 3))
>>> [(3, 'a'), (4, 'b'), (5, 'c'), (6, 'd'), (7, 'e')]
                    </code></pre>
                </section>

                <section>
                    <h2>Zip</h2>
                    <pre><code data-trim class="python">
my_first_list = ['a', 'b', 'c', 'd', 'e']
my_second_list = [1, 2, 3, 4, 5]
print(zip(my_first_list, my_second_list))
>>> [('a', 1), ('b', 2), ('c', 3), ('d', 4), ('e', 5)]

my_second_list = ['z', 'y', 'x', 'w', 'v']
print(zip(my_first_list, my_second_list))
>>> [('a', 'z'), ('b', 'y'), ('c', 'x'), ('d', 'w'), ('e', 'v')]
                    </code></pre>
                </section>

                <section>
                    <h2>Complex Examples</h2>
                    <pre><code data-trim class="python">
my_first_list = "abcde"
my_second_list = "zyxwv"
result = zip(my_first_list, my_second_list)
print(result)
>>> [('a', 'z'), ('b', 'y'), ('c', 'x'), ('d', 'w'), ('e', 'v')]

result2 = [''.join(x) for x in result]
print(result2)
>>> ['az', 'by', 'cx', 'dw', 'ev']
                    </code></pre>
                </section>

                <section>
                    <h2>Complex Examples (cont)</h2>
                    <pre><code data-trim class="python">
result = zip("abcde", "zyxwv")
print(dict(result))
>>> {'a': 'z', 'c': 'x', 'b': 'y', 'd': 'w'}

print(dict([(k * 3, v) for k, v in result]))
>>> {'aaa': 'z', 'bbb': 'y', 'ccc': 'x', 'ddd': 'w'}
                    </code></pre>
                </section>

                <section>
                    <h2>The "filter" builtin</h2>
                    <pre><code data-trim class="python">
my_list = [1, 2, 3, 4, 5, 6]
print([x for x in my_list if x % 2 == 0])
>>> [2, 4, 6]

print(filter(lambda x: x % 2 == 0, my_list))
>>> [2, 4, 6]
                    </code></pre>
                </section>

                <section>
                    <h2>The "any" and "all" builtins</h2>
                    <pre><code data-trim class="python">
my_list = [True, False, False, False]
print(any(my_list))
>>> True

print(all(my_list))
>>> False

my_list = [True, True, True]
print(all(my_list))
>>> True
                    </code></pre>
                </section>

                <section>
                    <h2>The "map" builtin</h2>
                    <pre><code data-trim class="python">
my_list = range(1, 7)
print(my_list)
>>> [1, 2, 3, 4, 5, 6]

print([x * 2 for x in my_list])
>>> [2, 4, 6, 8, 10, 12]

print(map(lambda x: x * 2, my_list))
>>> [2, 4, 6, 8, 10, 12]
                    </code></pre>
                </section>

                <section>
                    <h2>The "reduce" builtin</h2>
                    <pre><code data-trim class="python">
val = 0
for x in range(1, 7):
    val += my_list
print(val)
>>> 21

print(reduce(lambda x, y: x + y, range(1, 7)))
>>> 21

print(reduce(lambda x, y: x * y, range(1, 7)))
>>> 720
                    </code></pre>
                </section>

                <section>
                    <h2>The "sum" builtin</h2>
                    <pre><code data-trim class="python">
print(reduce(lambda x, y: x + y, range(1, 7)))
>>> 21

print(sum(range(1,7)))
>>> 21
                    </code></pre>
                </section>

                <section>
                    <h1>ACT 3</h1>
                </section>

                <section>
                    <h1>What is a closure?</h1>
                </section>

                <section>
                    <h2>A closure is a function that wraps around another function and some number of variables and 
                        'closes over' or 'traps' what it contains in it's own scope.</h2>
                </section>

                <section>
                    <h2>Start with the inner part</h2>
                    <pre><code data-trim class="python">
def multiply_numbers(x, y):
    return x * y

print(multiply_numbers(3, 5))
>>> 15
                    </code></pre>
                </section>

                <section>
                    <h2>Wrap the inner part</h2>
                    <pre><code data-trim class="python">
def mult_closure(x):
    def wrapped(y):
        #wrapped closes over the 'x' variable
        return x * y 
    return wrapped
                    </code></pre>
                </section>

                <section>
                    <h2>Closure Example</h2>
                    <pre><code data-trim class="python">
#this returns wrapped with 3 enclosed as 'x'
mult_by_three = mult_closure(3)

print(mult_by_three(5))
>>> 15
print(mult_by_three(10))
>>> 30
                    </code></pre>
                </section>

                <section>
                    <h2>Closures (cont)</h2>
                    <pre><code data-trim class="python">
#this returns wrapped with 10 enclosed as 'x'
mult_by_ten = mult_closure(10) 

print(mult_by_ten(5))
>>> 50
print(mult_by_ten(15))
>>> 150
                    </code></pre>
                </section>

                <section>
                    <h2>When to use a closure?</h2>
                    <ul>
                        <li>Great to DRY up code. Add Syntactic Sugar.</li>
                        <li>You need to write a complicated generator.</li>
                        <li>Monkey Patch a function you can't change.</li>
                        <li>Dynamically build behavior by 'stacking' functions.</li>
                    </ul>
                </section>

                <section>
                    <h2>Monkey Patch Example</h2>
                    <pre><code data-trim class="python">
def bad_function_from_library(some_attr): #You didn't write this.
    some_attr / 0 #Oh noes!

print(bad_function_from_library(10))
>>> ZeroDivisionError: integer division or modulo by zero 
                    </code></pre>
                </section>


                <section>
                    <h2>Monkey Patch (cont.)</h2>
                    <pre><code data-trim class="python">
def dont_panic_closure(bad_func):
    def wrapped(some_attr):
        try:
            bad_func(some_attr) #wrapped closes over bad_func
        except:
            print("The bad function unleashed Zombies!")
    return wrapped


catch_it = dont_panic_closure(bad_function_from_library)
print(catch_it(10))
>>> The bad function unleashed Zombies!
                    </code></pre>
                </section>

                <section>
                    <h1>What is a decorator?</h1>
                </section>

                <section>
                    <h2>Decorator Example</h2>
                    <pre><code data-trim class="python">
def dont_panic(bad_func):
    def wrapped(some_attr):
        try:
            bad_func(some_attr) #wrapped closes over bad_func
        except:
            print("The bad function unleashed Zombies!")
    return wrapped
                    </code></pre>
                </section>

                <section>
                    <h2>Decorator Example (cont.)</h2>
                    <pre><code data-trim class="python">
@dont_panic
def bad_function_i_wrote(some_attr): #You totally wrote this.
    some_attr / 0 #Oh noes!

print(bad_function_i_wrote(10))
>>> The bad function unleashed Zombies!
                    </code></pre>
                </section>

                <section>
                    <h2>@ is syntactic sugar for closing over a function</h2>
                </section>

                <section>
                    <h2>Lets log it!</h2>
                    <pre><code data-trim class="python">
def logger(func_to_log):
    def wrapped(*args, **kwargs):
        print("Arguments were: %s, %s" % (args, kwargs))
        func_to_log(*args, **kwargs) #call the real function
    return wrapped

@logger
def my_func(x, y):
    return x * y

print(my_func(10, 15))
>>> Arguments were (10, 15), {}
>>> 150
                    </code></pre>
                </section>

                <section>
                    <h1>ACT 4</h1>
                </section>

                <section>
                    <h2>What is the difference between an Iterator and a Generator?</h2>
                </section>

                <section>
                    <h2>A basic generator</h2>
                    <pre><code data-trim class="python">
def step(start=0, step=1):
    _start = start
    while True:
        yield _start
        _start += step

stepper = step(10, 2)
                    </code></pre>
                </section>

                <section>
                    <h2>A basic generator (cont.)</h2>
                    <pre><code data-trim class="python">
print(stepper.next())
>>> 10
print(stepper.next())
>>> 12
print(stepper.next())
>>> 14
                    </code></pre>
                </section>

                <section>
                    <h2><b>yield</b> is both the exit and entry point for the generator</h2>
                </section>

                <section>
                    <h2>What will list(stepper) do?</h2>
                </section>

                <section>
                    <h2>Lets fix that</h2>
                    <pre><code data-trim class="python">
def step(start=0, step=1, end=50):
    _start = start
    while _start < end:
        yield _start
        _start += step
                    </code></pre>
                </section>

                <section>
                    <h2>Lets fix that (cont.)</h2>
                    <pre><code data-trim class="python">
stepper = step(10, 10)
print(list(stepper))
>>> [10, 20, 30, 40]
stepper = step(30, 5, 60)
print(list(stepper))
>>> [30, 35, 40, 45, 50, 55]
                    </code></pre>
                </section>

                <section>
                    <h2>A Generator Expression</h2>
                    <pre><code data-trim class="python">
stepper = (x * 5 for x in range(0, 10))
print(list(stepper))
>>> [0, 5, 10, 15, 20, 25, 30, 35, 40, 45]
stepper = (x ** 2 for x in range(0, 5))
print(list(stepper))
>>> [0, 1, 4, 9, 16]
                    </code></pre>
                </section>

                <section>
                    <h1>Look familiar?</h1>
                </section>

                <section>
                    <h2>Why use generators?</h2>
                    <ul>
                        <li>Work with large data sets</li>
                        <li>Don't need to hold the entire list in memory.</li>
                        <li>Processing data in realtime.</li>
                    </ul>
                </section>

                <section>
                    <h1>ACT 5</h1>
                </section>

                <section>
                    <h1>The 'itertools' Library</h2>
                </section>

                <section>
                    <h2>chain(*seq)</h2>
                    <pre><code data-trim class="python">
from itertools import chain
list_a = ['a', 'b', 'c']
list_b = range(1,4)
print(list(chain(list_a, list_b))
>>> ['a', 'b', 'c', 1, 2, 3]
                    </code></pre>
                </section>

                <section>
                    <h2>combinations</h2>
                    <pre><code data-trim class="python">
from itertools import combinations

my_list = 'abc'
print(list(combinations(my_list, 2))
>>> [('a', 'b'), ('a', 'c'), ('b', 'c')]

my_list = range(1,6)
print(list(combinations(my_list, 4))
>>> [(1, 2, 3, 4), (1, 2, 3, 5), (1, 2, 4, 5), (1, 3, 4, 5), (2, 3, 4, 5)]
                    </code></pre>
                </section>

                <section>
                    <h2>permutations</h2>
                    <pre><code data-trim class="python">
from itertools import permutations

my_list = 'abc'
print(list(permutations(my_list, 2))
>>> [('a', 'b'), ('a', 'c'), ('b', 'a'), 
>>>     ('b', 'c'), ('c', 'a'), ('c', 'b')]

my_list = range(1,6)
print(list(permutations(my_list, 2))
>>> [(1, 2), (1, 3), (1, 4), (1, 5), (2, 1), 
>>>     (2, 3), (2, 4), (2, 5), (3, 1), (3, 2),
>>>     (3, 4), (3, 5), (4, 1), (4, 2), (4, 3), 
>>>     (4, 5), (5, 1), (5, 2), (5, 3), (5, 4)]
                    </code></pre>
                </section>


                <section>
                    <h2>compress</h2>
                    <pre><code data-trim class="python">
from itertools import compress

my_list = 'abcdef'
my_slectors = [1,0,1,1,0,1]
print(list(compress(my_list, my_selectors))
>>> ['a', 'c', 'd', 'e', 'f']

print([v for v, s in zip(my_list, my_selectors) if s])
>>> ['a', 'c', 'd', 'e', 'f']
                    </code></pre>
                </section>

                <section>
                    <h2>count</h2>
                    <pre><code data-trim class="python">
from itertools import count

counter = count(1, 5)
for l in 'abc':
    print(' '.join(l, str(counter.next())))
>>> a 1
>>> b 6
>>> c 11
                    </code></pre>
                </section>

                <section>
                    <h2>cycle</h2>
                    <pre><code data-trim class="python">
from itertools import cycle

i_want_to_ride_my_bi = cycle('abc123')
print([i_want_to_ride_my_bi.next() for i in range(0,10)])
>>> ['a', 'b', 'c', 1, 2, 3, 'a', 'b', 'c']
                    </code></pre>
                </section>

                <section>
                    <h2>groupby</h2>
                    <pre><code data-trim class="python">
from itertools import groupby

my_list='aaaaabbbbcccdd' #sorted
print(list(groupby(my_list)))
>>> [('a', <itertools._grouper object at 0x10fd76410>), 
>>>     ('b', <itertools._grouper object at 0x10fd76450>), 
>>>     ...
                    </code></pre>
                </section>
            
                <section>
                    <h2>groupby (cont.)</h2>
                    <pre><code data-trim class="python">
print({k:list(v) for k, v in groupby(my_list)})
>>> {'a': ['a', 'a', 'a', 'a', 'a'], 
>>>     'c': ['c', 'c', 'c'], 
>>>     'b': ['b', 'b', 'b', 'b'],
>>>     'd': ['d', 'd']}
                    </code></pre>
                </section>

                <section>
                    <h2>groupby (cont.)</h2>
                    <pre><code data-trim class="python">
my_list = [
    {'id': 1, 'name': 'raymond'},
    {'id': 1, 'name': 'bob'},
    {'id': 2, 'name': 'sue'}]

print({k:list(v) for k, v in groupby(my_list, 
        key=lambda x: x['id')})
>>> {1: [{'id': 1, 'name': 'raymond'}, 
>>>         {'id': 1, 'name': 'bob'}],
>>>  2: [{'id': 2, 'name': 'sue'}]}
                    </code></pre>
                </section>

                <section>
                    <h2>groupby (cont.)</h2>
                    <pre><code data-trim class="python">
my_list = [
    {'id': 1, 'name': 'raymond'},
    {'id': 1, 'email': 'raymond@spkrbar.com'},
    {'id': 2, 'name': 'sue'},
    {'id': 2, 'email': 'sue@sallysue.com'}]

[ dict(
    reduce(lambda y, z: y + z, 
        map(lambda x: x.items(), v)
    )
) for k, v in groupby(my_list, key=lambda x: x['id']) ]
                    </code></pre>
                </section>

                <section>
                    <h2>groupby (cont.)</h2>
                    <pre><code data-trim class="python">
>>> [{ 'email': 'raymond@spkrbar.com',
>>>    'id': 1,
>>>    'name': 'raymond'}, 
>>>  { 'email': 'peggy@sue.com',
>>>     'id': 2,
>>>     'name': 'sue'}]
                    </code></pre>
                </section>

                <section>
                    <h2>product</h2>
                    <pre><code data-trim class="python">
from itertools import product
list_a = 'abc'
list_b = [1, 2]

print(list(product(list_a, list_b)))
>>> [('a', '1'), ('a', '2'), ('b', '1'), ('b', '2'), ('c', '1'), ('c', '2')]

print({x[0]:x[1] for x in product(list_a, list_b)})
>>> {'a': '2', 'c': '2', 'b': '2'}
                    </code></pre>
                </section>

                <section>
                    <h2>ifilter/imap/izip</h2>
                    <h4>Works exactly like filter/map/zip expect for one thing. What is it?</h4>
                    </code></pre>
                </section>
                    
                <section>
                    <h1>ACT 6</h1>
                </section>

                <section>
                    <h2>Introspection and Metaprogramming</h2>
                    <ol>
                        <li>What is Metaprogramming?</li>
                        <li>getattr/hasattr/setattr</li>
                        <li>Understanding type</li>
                        <li>Metaclasses</li>
                    </ol>
                </section>

                <section>
                    <h1>Whew...</h1>
                </section>

                <section>
                    <h1>Questions?</h1>
                    <img src="logo.png" />
                </section>
			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.min.js"></script>

		<script>

			// Full list of configuration options available here:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
				transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

				// Optional libraries used to extend on reveal.js
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
					{ src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
					// { src: 'plugin/search/search.js', async: true, condition: function() { return !!document.body.classList; } }
					// { src: 'plugin/remotes/remotes.js', async: true, condition: function() { return !!document.body.classList; } }
				]
			});

		</script>

	</body>
</html>
